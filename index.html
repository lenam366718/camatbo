<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>C√¢u C√° V·∫°n C√¢n</title>
<style>
body {
    margin: 0;
    font-family: 'Segoe UI', sans-serif;
    background: linear-gradient(#0f2027, #203a43, #2c5364);
    color: #fff;
    text-align: center;
    overflow: hidden;
}

h1 { text-shadow: 0 0 10px cyan; }

/* Nh√¢n v·∫≠t */
.character {
    font-size: 80px;
    animation: idle 1.5s infinite alternate;
}
@keyframes idle {
    from { transform: translateY(0); }
    to { transform: translateY(-6px); }
}

/* M√∫a qu·∫°t */
.dance {
    animation: dance 0.4s infinite;
}
@keyframes dance {
    0% { transform: rotate(0deg); }
    50% { transform: rotate(10deg); }
    100% { transform: rotate(-10deg); }
}

/* C·∫ßn c√¢u */
.rod { font-size: 90px; }

/* C√° */
.fish {
    position: absolute;
    bottom: -120px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 70px;
    opacity: 0;
}
.fly {
    animation: fishUp 1.5s forwards;
}
@keyframes fishUp {
    0% { bottom: -120px; opacity: 0; }
    40% { opacity: 1; }
    100% { bottom: 320px; opacity: 0; }
}

.rare { text-shadow: 0 0 15px cyan; }
.lantern { text-shadow: 0 0 25px orange, 0 0 45px red; }
.legend { animation: rainbow 1s linear infinite; }

@keyframes rainbow {
    from { filter: hue-rotate(0deg); }
    to { filter: hue-rotate(360deg); }
}

/* Thanh m√°u boss */
.boss-hp {
    width: 300px;
    height: 20px;
    border: 2px solid #fff;
    margin: 10px auto;
    display: none;
}
.hp {
    height: 100%;
    width: 100%;
    background: red;
    transition: width 0.5s;
}

/* Th√†nh t·ª±u */
#achievement {
    position: fixed;
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
    background: linear-gradient(45deg, orange, red);
    padding: 15px 25px;
    border-radius: 15px;
    box-shadow: 0 0 30px gold;
    font-size: 20px;
    display: none;
    z-index: 999;
}

/* Ph√°o hoa */
.firework {
    position: absolute;
    font-size: 30px;
    animation: boom 1.5s forwards;
}
@keyframes boom {
    0% { transform: scale(0); opacity: 1; }
    100% { transform: scale(2.5); opacity: 0; }
}

button {
    padding: 12px 26px;
    font-size: 20px;
    border-radius: 12px;
    border: none;
    background: orange;
    cursor: pointer;
}
</style>
</head>
<body>

<h1>üé£ C√ÇU C√Å V·∫†N C√ÇN üé£</h1>

<div class="character" id="char">üßç‚Äç‚ôÇÔ∏èü™≠</div>
<div class="rod">üé£</div>

<button id="btn" onclick="cauCa()">C√ÇU C√Å</button>

<div class="boss-hp" id="bossHp">
    <div class="hp" id="hpBar"></div>
</div>

<div id="result">Th·∫£ c·∫ßn xu·ªëng n∆∞·ªõc...</div>
<div id="total">T·ªïng c√¢n: 0 kg</div>

<div id="fish" class="fish">üêü</div>

<div id="achievement">
üèÜ M√∫a qu·∫°t 36 l·∫ßn khi b·∫Øt ƒë∆∞·ª£c boss C√° L·ªìng ƒê√®n
</div>

<script>
let tongCan = 0;
let daDatThanhTuu = false;
let bossHP = 3;

function taoPhaoHoa() {
    for (let i = 0; i < 15; i++) {
        let fw = document.createElement("div");
        fw.className = "firework";
        fw.innerHTML = "üéÜ";
        fw.style.left = Math.random() * window.innerWidth + "px";
        fw.style.top = Math.random() * window.innerHeight + "px";
        document.body.appendChild(fw);
        setTimeout(() => fw.remove(), 1500);
    }
}

function cauCa() {
    const roll = Math.random() * 100;
    const fish = document.getElementById("fish");
    const result = document.getElementById("result");
    const hpBar = document.getElementById("hpBar");
    const bossBox = document.getElementById("bossHp");
    const char = document.getElementById("char");

    let can, emoji, loai;

    if (roll < 15) {
        // BOSS C√Å L·ªíNG ƒê√àN
        loai = "lantern";
        can = 3636;
        emoji = "üèÆüêü";

        bossBox.style.display = "block";
        bossHP--;
        hpBar.style.width = (bossHP / 3 * 100) + "%";

        if (!daDatThanhTuu) {
            daDatThanhTuu = true;
            document.getElementById("achievement").style.display = "block";
            char.classList.add("dance");
            taoPhaoHoa();

            setTimeout(() => {
                document.getElementById("achievement").style.display = "none";
                char.classList.remove("dance");
            }, 4000);
        }

        if (bossHP <= 0) {
            result.innerHTML = "üíÄ B·∫°n ƒë√£ h·∫° g·ª•c BOSS C√° L·ªìng ƒê√®n!";
            bossBox.style.display = "none";
            bossHP = 3;
        }
    } else {
        loai = "rare";
        can = Math.floor(Math.random() * 500) + 50;
        emoji = "üê†";
    }

    tongCan += can;

    fish.className = "fish " + loai;
    fish.innerHTML = emoji;
    void fish.offsetWidth;
    fish.classList.add("fly");

    result.innerHTML = `üéâ B·∫°n c√¢u ƒë∆∞·ª£c ${emoji} n·∫∑ng ${can} kg`;
    document.getElementById("total").innerHTML = "üî• T·ªïng c√¢n: " + tongCan + " kg";
}
</script>

</body>
</html>
